generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DIRECT_URL")
}

model Team {
  id          Int      @id @default(autoincrement()) @map("id")
  name        String
  awayMatches Match[]  @relation("AwayTeam")
  homeMatches Match[]  @relation("HomeTeam")

  @@map("Teams")
}

model Match {
  id          Int         @id @default(autoincrement()) @map("id")
  homeTeamId  Int
  awayTeamId  Int
  homeScore   Int
  awayScore   Int
  date        DateTime
  awayTeam    Team        @relation("AwayTeam", fields: [awayTeamId], references: [id], map: "Match_awayTeamId_fkey")
  homeTeam    Team        @relation("HomeTeam", fields: [homeTeamId], references: [id], map: "Match_homeTeamId_fkey")
  Predictions Predictions?

  @@unique([homeTeamId, awayTeamId, date], map: "Match_homeTeamId_awayTeamId_date_key")
  @@map("Matches")
}

model Predictions {
  id                 Int       @id @default(autoincrement()) @map("id")
  matchId            Int       @unique
  predictedHomeScore Int
  predictedAwayScore Int
  createdAt          DateTime? @default(now()) @db.Timestamp(6)
  Matches            Match     @relation(fields: [matchId], references: [id], onDelete: Cascade, map: "Prediction_matchId_fkey")

  @@map("Predictions")
}
